<%
  css_class =
    if level == 4
      if rosters.count == Roster::MAX_LEVEL4
        'complete'
      else
        'incomplete'
      end
    end
%>

<div id="rosters_level<%= level %>" class="rosters-level">
  <div class="heading-and-count">
    <%= content_tag :h2, Roster::LEVEL_MAP[level][:name] %>
    <%= content_tag :span, rosters.count,
                    class: "count rosters-count #{css_class}" %>
  </div>

  <div class="rosters">
    <% if can?(:create, new_roster) %>
      <% Roster.level_positions(level).each do |pos| %>
        <%= render 'position_form',
                   team: team, rosters: rosters,
                   level: level, position: pos %>
      <% end %>
    <% else %>
      <%= render rosters, team: @team %>
    <% end %>
  </div>
</div>
