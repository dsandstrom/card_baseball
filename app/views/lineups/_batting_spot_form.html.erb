<%
  spot = lineup.spots.find_or_initialize_by(batting_order: batting_order)
  url =
    if spot.persisted?
      lineup_spot_path(lineup, spot)
    else
      lineup_spots_path(lineup)
    end
%>

<%= form_with(model: spot, url: url,
              class: 'batting-spot-form') do |form| %>
  <%= form.hidden_field :batting_order %>

  <div class="spot-hitter-fields">
    <%= content_tag :span, batting_order,
                    class: 'spot-batting-order' %>

    <% if spot.hitter %>
      <div class="spot-hitter-field">
        <%= content_tag :span, spot.hitter.roster_name,
                        class: 'spot-hitter-name' %>

        <div class="spot-hitter-positions">
          <% spot.hitter.positions.each do |position| %>
            <%= form.label "#{spot.id}_position_#{position}" do %>
              <%= Hitter.initials_for_position(position) %>
              <%= form.radio_button :position, position,
                                    id: "spot_#{spot.id}_position_#{position}" %>
            <% end %>
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="spot-hitter-field">
      </div>
    <% end %>

    <div class="actions">
      <%= form.submit %>
    </div>
  </div>
<% end %>
